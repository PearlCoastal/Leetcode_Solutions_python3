LC.446 ç­‰å·®æ•°åˆ—åˆ’åˆ† II - å­åºåˆ—
====
https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/

## é¢˜ç›®æè¿°
<img width="642" alt="æˆªå±0003-08-12 14 26 29" src="https://user-images.githubusercontent.com/10908630/129146226-727e1123-2f1b-4b80-9ef4-156baa3af366.png">

## æ€è·¯ 

ğŸ‘‰ [446. ç­‰å·®æ•°åˆ—åˆ’åˆ†](https://github.com/PearlCoastal/Leetcode_GitOn/blob/master/DynamicProcessing/413.md) çš„å‡çº§ç‰ˆï¼Œ è¿™ä¹Ÿå¤ªéš¾äº†å§ã€‚

**åŠ¨æ€è§„åˆ’ + å“ˆå¸Œè¡¨**

**å­åºåˆ—é—®é¢˜**ï¼Œ ä¸è¦æ±‚è¿ç»­ï¼Œ å°±è¦æƒ³åˆ°ç”¨åŠ¨æ€è§„åˆ’æ¥è§£é¢˜ã€‚

**åŠ¨æ€è§„åˆ’çš„çŠ¶æ€å®šä¹‰ï¼š**
```
1. dp[i][diff] ä»£è¡¨ä»¥å…ƒç´  nums[i] ç»“å°¾ï¼Œ å·®ä¸º diff çš„ä¸ªæ•°ã€‚

2. äºŒç»´åŠ¨æ€è§„åˆ’ï¼Œ éå† nums ä¸­çš„å…ƒç´ å¯¹ (nums[i], nums[j])ã€‚

3. åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼š dp[i][diff] += dp[j][diff] + 1ã€‚

    è¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ += å‘¢, å› ä¸º dp[j][diff] æ˜¯ä»¥ diff ä¸ºå…¬å·®çš„ ä»¥ nums[j] ç»“å°¾çš„å­åºåˆ—çš„ä¸ªæ•°ã€‚
    
    è€Œç°åœ¨è¦åœ¨è¿™ä¸€å †å­åºåˆ—åé¢åŠ ä¸Šä¸€ä¸ª nums[i]ã€‚
    
    æ¯”å¦‚ nums = [2, 4, 6, 8, 10]
    
    ä»¥æ•°å­— 8 ä½ç»“å°¾çš„å…¬å·®ä¸º 2 çš„å­åºåˆ—ä¸€å…±æœ‰ 2 ä¸ªï¼Œ åˆ†åˆ«æ˜¯ [4, 6, 8], [2, 4, 6, 8]ã€‚
    
    ç°åœ¨æ•°å­— 10 è¦åŠ åˆ°ä»¥ 8 ç»“å°¾å…¬å·®ä¸º 2 çš„å­åºåˆ—åé¢ï¼Œ å°±æœ‰äº† [4, 6, 8, 10] å’Œ [2, 4, 6, 8, 10] å’Œæ–°çš„ [6, 8, 10]ã€‚
    
    æ‰€ä»¥è¦ += ã€‚

4. é¢˜ç›®è¦æ±‚è‡³å°‘æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œ i, j å’Œ diff æ­£å¥½å°±æ˜¯ä¸‰ä¸ªå…ƒç´ ã€‚
```
å‚è€ƒåŠ›æ‰£å®˜æ–¹è§£ç­”ï¼Œ äºŒç»´åŠ¨æ€è§„åˆ’æˆ‘è¿˜èƒ½åšå‡ é“ç®€å•çš„ï¼Œ éš¾çš„çœŸçš„å°±ggäº†ã€‚

## ä»£ç 
```python
class Solution:
    def numberOfArithmeticSlices(self, nums: [int]) -> int:
        '''
        dp = {index: {diff: count}}
        '''
        dp = [collections.defaultdict(int) for _ in nums]
        ans = 0
        for i in range(len(nums)):
            for j in range(i):
                diff = nums[i] - nums[j]
                dp[i][diff] += dp[j][diff] + 1
                if dp[j][diff]:
                    ans += dp[j][diff]
        return ans
```

## å¤æ‚åº¦åˆ†æ
- æ—¶é—´å¤æ‚åº¦ï¼š O(n^2)
- ç©ºé—´å¤æ‚åº¦ï¼š O(n^2)
