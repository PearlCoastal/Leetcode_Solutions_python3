LC. 673 Number of longest increasing subsequence
====

(https://leetcode-cn.com/problems/number-of-longest-increasing-subsequence/)

ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ã€‚

ç¤ºä¾‹ 1:
è¾“å…¥: [1,3,5,4,7]
è¾“å‡º: 2
è§£é‡Š: æœ‰ä¸¤ä¸ªæœ€é•¿é€’å¢å­åºåˆ—ï¼Œåˆ†åˆ«æ˜¯ [1, 3, 4, 7] å’Œ[1, 3, 5, 7]ã€‚

ç¤ºä¾‹ 2:
è¾“å…¥: [2,2,2,2,2]
è¾“å‡º: 5
è§£é‡Š: æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦æ˜¯1ï¼Œå¹¶ä¸”å­˜åœ¨5ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º1ï¼Œå› æ­¤è¾“å‡º5ã€‚
æ³¨æ„:Â ç»™å®šçš„æ•°ç»„é•¿åº¦ä¸è¶…è¿‡ 2000 å¹¶ä¸”ç»“æœä¸€å®šæ˜¯32ä½æœ‰ç¬¦å·æ•´æ•°ã€‚

## æ€è·¯ï¼š
è¿™é“é¢˜åœ¨ LIS çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªå˜é‡ï¼Œ è¦è®°å½• æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°ã€‚

  ç”¨äºŒç»´ dpã€‚

  dp[i][0]: ä»£è¡¨ä»¥ nums[i] ç»“å°¾çš„é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚
  dp[i][1]: ä»£è¡¨ä»¥ nums[i] ç»“å°¾çš„é€’å¢å­åºåˆ—çš„ä¸ªæ•°ã€‚

å¼„æ¸…æ¥šğŸ‘†ä¸Šé¢ [0][1]çš„åŒºåˆ«ï¼Œæ—¶åˆ»é“­è®°äºå¿ƒï¼Œå°±å¯ä»¥å¼€å§‹æ‰‹æ”¹ LIS äº†ã€‚

LIS ä¸­ç¢°åˆ°åé¢çš„æ•°æ¯”å‰é¢å¤§ï¼Œå°±å¯ä»¥åºåˆ—é•¿åº¦+1ã€‚
ä½†æ˜¯è¿™é“é¢˜é‡Œè¦å…ˆç¡®å®šæ˜¯å¦å¯ä»¥æ‹¼æ¥ã€‚

  - åŸå…ˆçš„åºåˆ— + æˆ‘ = dp[i][0] + 1 è¦æ»¡è¶³ > dp[j][0] æ‰å¯ä»¥æ‹¼æ¥ã€‚
    æ›´æ–° dp[j][1] = dp[i][1] ä»£è¡¨ä¸ºåŒä¸€æ¡å­åºåˆ—ã€‚

  - å¦‚æœ dp[i][0] + 1 == dp[j][0] çš„è¯è¯´æ˜å·²ç»å­˜åœ¨ å­åºåˆ—é•¿åº¦ä»¥ nums[j] ç»“æŸçš„å¦å¤–çš„å­åºåˆ—äº†ã€‚
    å°±è¦åœ¨ dp[i][1] çš„åŸºç¡€ä¸Š + dp[j][1] è¡¨ç¤ºåºåˆ—çš„ä¸ªæ•°åŠ åŠ ã€‚

## çŠ¶æ€å®šä¹‰
  dp[i][0]: ä»£è¡¨ä»¥ nums[i] ç»“å°¾çš„é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚  
  dp[i][1]: ä»£è¡¨ä»¥ nums[i] ç»“å°¾çš„é€’å¢å­åºåˆ—çš„ä¸ªæ•°ã€‚

## çŠ¶æ€è½¬ç§»æ–¹ç¨‹
  æœ‰ i > j, ä¸”nums[i] > nums[j]. 
  - å¹¶ä¸” dp[i][0] + 1 > dp[j][0]ï¼Œæœ‰ dp[j][0] = dp[i][0] + 1 ä¸” dp[j][1] = dp[i][1]

  - å¦‚æœ dp[i][0] + 1 == dp[j][0]ï¼Œåˆ™ dp[j][1] += dp[i][1]

## è¿”å›ç»“æœ
  dp[i][0] ä»£è¡¨é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œè€Œæœ€é•¿é€’å¢å­åºåˆ—å¯èƒ½ä¸åªæœ‰ä¸€æ¡ã€‚  
  æ‰€ä»¥è¦æŠŠæ‰€æœ‰ dp[i][0] ä¸ºç›¸åŒæœ€å¤§å€¼çš„ dp[i][1]ä¸ªæ•°æ±‚å’Œï¼Œæœ€åå°±æ˜¯æ‰€æœ‰æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦äº†ã€‚

## ä»£ç ï¼š
```python
#
# @lc app=leetcode.cn id=673 lang=python3
#
# [673] æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•°
#

# @lc code=start
class Solution:
    def findNumberOfLIS(self, nums: [int]) -> int:
        
        dp = [[1, 1] for i in range(len(nums))]
        #longeståˆå§‹åŒ–ä¸º1ï¼Œä¸æ˜¯0ï¼Œå› ä¸ºæœ€çŸ­ä¹Ÿæ˜¯è‡ªå·±ä¸€ä¸ªæ•°
        longest = 1
        for i in range(len(nums)):
            for j in range(i + 1, len(nums)):
                if nums[j] > nums[i]:
                    #ä¸Šå‡å­åºåˆ—åŠ ä¸Šæ–°çš„jä¹‹åæ¯”åŸæ¥jçš„è¦é•¿
                    if dp[i][0] + 1 > dp[j][0]:
                        dp[j][0] = dp[i][0] + 1
                        dp[j][1] = dp[i][1]
                        #æ›´æ–°longestä¸ºæœ€é•¿çš„å­åºåˆ—é•¿åº¦
                        longest = max(longest, dp[j][0])
                    #ä¸Šå‡å­åºåˆ—åŠ ä¸Šjä¹‹åå’Œjä¸€æ ·é•¿
                    elif dp[i][0] + 1 == dp[j][0]:
                        dp[j][1] += dp[i][1]
        ans = 0
        for i in range(len(nums)):
            if dp[i][0] == longest:
                ans += dp[i][1]
        
        return ans
        
# @lc code=end

nums = [1,3,5,4,7]
nums = [2,2,2,2,2]
```

## å¤æ‚åº¦åˆ†æï¼š
N ä¸ºæ•°ç»„numsé•¿åº¦

  - æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)
  - ç©ºé—´å¤æ‚åº¦ï¼šO(N^2)
